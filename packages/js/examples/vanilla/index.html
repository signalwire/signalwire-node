<!DOCTYPE html>
<html>
<head>
	<title>Signalwire Call Demo</title>
	<meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Cross Browser WebRTC Adapter -->
	<script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>

	<!-- Include the SignalWire Relay JS SDK -->
	<script type="text/javascript" src="index.min.js"></script>

	<!-- My web applications custom handling. -->
	<script type="text/javascript" src="index.js"></script>

	<!-- To style up the demo a little -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<style></style>
	<link rel="shortcut icon" href="https://signalwire.com/assets/images/favicon.ico" />
</head>
<body class="bg-light">
	<div class="container">
		<div class="row py-5">
			<div class="col-12 pb-3">
				<h1>Signalwire Call Demo</h1>

				<p>This demo allows you to make calls to other browsers, SIP Endpoints or Phone Numbers from your SignalWire project in your browser.</p>
				<p>Visit <a href="https://docs.signalwire.com/topics/relay-sdk-js">Relay SDK for JavaScript Documentation</a> for more information and documentation.</p>

				<p>Fill in your <strong>Project ID</strong> and <strong>JWT</strong> and click Connect... You'll then be able to make audio and video calls to other endpoints.</p>
			</div>

			<div class="col-12 col-md-4">
				<div class="card">
					<div class="card-body">
						<h5>Connect</h5>
					  <div class="form-group">
					    <label for="project">Project</label>
					    <input type="text" class="form-control" id="project" placeholder="Enter Project ID" onchange="saveInLocalStorage(event)">
					    <small id="projectHelp" class="form-text text-muted">Enter the Project ID found on your SignalWire Project Dashboard.</small>
					  </div>
					  <div class="form-group">
					    <label for="token">Token</label>
					    <input type="text" class="form-control" id="token" placeholder="Enter your JWT" onchange="saveInLocalStorage(event)">
					    <small id="tokenHelp" class="form-text text-muted">Generate a JWT and enter it here. For more information, visit <a href="/topics/relay-sdk-js#relay-sdk-for-javascript-using-the-sdk">Using the JavaScript SDK Documentation</a></small>
					  </div>
					  <button id="btnConnect" class="btn btn-block btn-success" onclick="connect()">Connect</button>
						<button id="btnDisconnect" class="btn btn-block btn-danger d-none" onclick="disconnect()">Disconnect</button>

						<div class="text-center mt-3 text-muted">
							<small>Status: <span id='connectStatus'>Not Connected</span></small>
						</div>
					</div>
				</div>
			</div>

			<div class="col-12 col-md-8 mt-4 mt-md-1">
				<div class="row">
					<div class="col-6">
						<h5>Local Video</h5>
						<video id="localVideo" autoplay="true" class="w-100" style="background-color: #000; border: 1px solid #ccc; border-radius: 5px;"></video>
					</div>
					<div class="col-6">
						<h5>Remote Video</h5>
						<video id="remoteVideo" autoplay="true" class="w-100" playsinline style="background-color: #000; border: 1px solid #ccc; border-radius: 5px;"></video>
					</div>
				</div>

				<div class="form-group">
			    <label for="number">Call To:</label>
			    <input type="text" class="form-control" id="number" placeholder="Enter Resource or Number to Dial" onchange="saveInLocalStorage(event)">
				</div>
				<div>Call Options:</div>
				<div class="form-check">
				  <input type="checkbox" id="audio" value="1" onchange="saveInLocalStorage(event)">
				  <label class="form-check-label" for="audio">
				    Include Audio
				  </label>
				</div>
				<div class="form-check">
				  <input type="checkbox" id="video" value="1" onchange="saveInLocalStorage(event)">
				  <label class="form-check-label" for="video">
				    Include Video
				  </label>
				</div>
				<button id="startCall" class="btn btn-primary px-5 mt-4" onClick="makeCall()" disabled="true">Call</button>
				<button id="hangupCall" class="btn btn-danger px-5 mt-4 d-none" onClick="hangup()" disabled="true">Hang up</button>
			</div>
		</div>
	</div>
</body>
</html>
